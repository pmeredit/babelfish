{
    "schemaName": "company_erd",
    "entities": [
        {
            "name": "Account",
            "db": "company",
            "collection": "Account",
            "primaryKey": "_id",
            "schema": {
                "bsonType": "object",
                "properties": {
                    "_id": {
                        "bsonType": "objectId"
                    },
                    "accountId": {
                        "bsonType": "string"
                    },
                    "accountName": {
                        "bsonType": "string"
                    },
                    "customerId": {
                        "bsonType": "objectId"
                    }
                },
                "references": {
                    "customerId": {
                        "entity": "Customer",
                        "field": "_id",
                        "relationshipType": "many-one",
                        "storageConstraints": [
                            {
                                "constraintType": "embedded",
                                "consistency": "strong",
                                "direction": "child",
                                "targetPath": "contact",
                                "projection": ["customerName", "customerAddress"]
                            }
                        ]
                    }
                },
                "required": ["_id", "accountId", "accountName", "customerId"],
                "additionalProperties": false
            }
        },
        {
            "name": "Customer",
            "db": "company",
            "collection": "Customer",
            "primaryKey": "_id",
            "schema": {
                "bsonType": "object",
                "properties": {
                    "_id": {
                        "bsonType": "objectId"
                    },
                    "customerName": {
                        "bsonType": "string"
                    },
                    "customerAddress": {
                        "bsonType": "string"
                    }
                },
                "required": ["_id", "customerName", "customerAddress"],
                "additionalProperties": false
            }
        },
        {
            "name": "Order",
            "db": "company",
            "collection": "Order",
            "primaryKey": "_id",
            "schema": {
                "bsonType": "object",
                "properties": {
                    "_id": {
                        "bsonType": "objectId"
                    },
                    "orderId": {
                        "bsonType": "string"
                    },
                    "orderDate": {
                        "bsonType": "date"
                    },
                    "accountId": {
                        "bsonType": "objectId"
                    },
                    "amounnt": {
                        "bsonType": "double"
                    }
                },
                "references": {
                    "accountId": {
                        "entity": "Account",
                        "field": "_id",
                        "relationshipType": "one-one",
                        "storageConstraints": [
                            {
                                "constraintType": "embedded",
                                "consistency": "strong",
                                "direction": "child",
                                "targetPath": "account",
                                "projection": ["contacct", "accountId"]
                            }
                        ]
                    }
                },
                "required": ["_id", "orderId", "orderDate", "accountId", "amount"],
                "additionalProperties": false
            }
        },
        {
            "name": "Invoice",
            "db": "company",
            "collection": "Invoice",
            "primaryKey": "_id",
            "schema": {
                "bsonType": "object",
                "properties": {
                    "_id": {
                        "bsonType": "objectId"
                    },
                    "invoiceNumber": {
                        "bsonType": "string"
                    },
                    "orderId": {
                        "bsonType": "objectId"
                    },
                    "amount": {
                        "bsonType": "double"
                    }
                },
                "references": {
                    "order_id": {
                        "entity": "Order",
                        "field": "_id",
                        "relationshipType": "many-one",
                        "storageConstraints": [
                            {
                                "constraintType": "embedded",
                                "consistency": "strong",
                                "direction": "parent",
                                "targetPath": "invoice"
                            }
                        ]
                    }
                },
                "required": ["_id", "invoiceNumber", "orderId", "amount"],
                "additionalProperties": false
            }
        },
        {
            "name": "Payment",
            "primaryKey": "_id",
            "db": "company",
            "collection": "Payment",
            "schema": {
                "bsonType": "object",
                "properties": {
                    "_id": {
                        "bsonType": "objectId"
                    },
                    "paymentId": {
                        "bsonType": "string"
                    },
                    "invoiceId": {
                        "bsonType": "objectId"
                    },
                    "amount": {
                        "bsonType": "double"
                    }
                },
                "references": {
                    "invoiceId": {
                        "entity": "Invoice",
                        "field": "_id",
                        "relationshipType": "one-one",
                        "storageConstraints": [
                            {
                                "constraintType": "embedded",
                                "consistency": "strong",
                                "direction": "child",
                                "targetPath": "payment"
                            }
                        ]
                    }
                },
                "required": ["_id", "paymentId", "invoiceId", "amount"],
                "additionalProperties": false
            }
        },
        {
            "name": "Shipment",
            "primaryKey": "_id",
            "db": "company",
            "collection": "Shipment",
            "schema": {
                "bsonType": "object",
                "properties": {
                    "_id": {
                        "bsonType": "objectId"
                    },
                    "trackingNumber": {
                        "bsonType": "string"
                    },
                    "orderId": {
                        "bsonType": "objectId"
                    },
                    "status": {
                        "bsonType": "string"
                    }
                },
                "references": {
                    "orderId": {
                        "entity": "Order",
                        "field": "_id",
                        "relationshipType": "many-one",
                        "storageConstraints": [
                            {
                                "constraintType": "embedded",
                                "consistency": "strong",
                                "direction": "parent",
                                "targetPath": "shipment"
                            }
                        ]
                    }
                },
                "required": ["_id", "trackingNumber", "orderId", "status"],
                "additionalProperties": false
            }
        },
        {
            "name": "LineItem",
            "primaryKey": "_id",
            "db": "company",
            "collection": "LineItem",
            "schema": {
                "bsonType": "object",
                "properties": {
                    "_id": {
                        "bsonType": "objectId"
                    },
                    "productName": {
                        "bsonType": "objectId"
                    },
                    "quantity": {
                        "bsonType": "long"
                    },
                    "unitPrice": {
                        "bsonType": "double"
                    },
                    "orderId": {
                        "bsonType": "objectId"
                    }
                },
                "references": {
                    "orderId": {
                        "entity": "Order",
                        "field": "_id",
                        "relationshipType": "many-one",
                        "storageConstraints": [
                            {
                                "constraintType": "embedded",
                                "consistency": "strong",
                                "direction": "parent",
                                "targetPath": "orderItems"
                            }
                        ]
                    }
                },
                "required": ["_id", "productName", "quantity", "unitPrice", "orderId"],
                "additionalProperties": false
            }
        }
    ]
}
