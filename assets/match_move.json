[
    {"$project": {
        "status": {"$concat": ["$status", "hello world"]}, 
        "type": 1
    }},
    {"$match": {
        "$expr": {"$and": [
            {"$eq": ["$status", "Ahello world"]},
            {"$eq": ["$type", "B"]}
        ]},
        "$expr": {"$eq": ["$type", "C"]}
    }},
    {"$lookup": 
        {
            "from": "collection",
            "pipeline": [
                {"$match": {
                    "$expr": {"$eq": ["$status", "A"]},
                    "$expr": {"$eq": ["$type", "B"]}
                }},
                {"$project": {
                    "status": 1,
                    "type": 1
                }}
            ],
            "as": "collection"
        }
    },
    {"$match": {
        "$expr": {"$and": [
            {"$eq": ["$collection.foo", "A"]},
            {"$eq": ["$type", "D"]}
        ]}
    }}
]
