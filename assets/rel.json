{
  "Address": {
      "Customer": {
           "relationshipType": "many-to-one",
           "description": "Original source relationship indicating an address might be linked to a customer. In the MongoDB model, addresses are typically embedded within customers.",
           "constraint": {
               "constraintType": "foreign",
               "db": "ecommerce_db",
               "collection": "customers",
               "direction": "parent",
               "localKey": "customer_id",
               "foreignKey": "customer_id",
               "projection": ["customer_id", "email"]
           },
           "consistency": "eventual"
      }
  },
  "OrderItem": {},
  "Customer": {
      "Order": {
           "relationshipType": "many-to-one",
           "description": "Links customers to their orders. Orders reference customers.",
           "constraint": {
               "constraintType": "embedded",
               "targetPath": "orders",
               "db": "ecommerce_db",
               "collection": "orders",
               "direction": "parent",
               "localKey": "_id",
               "foreignKey": "customer_ref_id",
               "projection": [
                   "original_order_id",
                   "order_date",
                   "total_amount",
                   "status"
               ]
          },
          "consistency": "eventual"
      }
  },
  "Category": {
       "Product": {
            "relationshipType": "many-to-one",
            "description": "Links categories to their products. Products reference categories.",
            "constraint": {
                "constraintType": "foreign",
                "db": "ecommerce_db",
                "collection": "products",
                "direction": "parent",
                "localKey": "_id",
                "foreignKey": "category_ref_id",
                "projection": ["original_product_id", "product_name", "price"]
            },
            "consistency": "eventual"
       }
  },
  "Product": {
      "Category": {
           "relationshipType": "many-to-one",
           "description": "Products belong to a category. This product references a category.",
           "constraint": {
                "constraintType": "foreign",
                "db": "ecommerce_db",
                "collection": "categories",
                "direction": "child",
                "localKey": "category_ref_id",
                "foreignKey": "_id",
                "projection": ["original_category_id", "category_name"]
           },
           "consistency": "eventual"
      }
  },
  "Order": {
       "OrderItem": {
            "relationshipType": "many-to-one",
            "description": "Order contains multiple order items, embedded within the order document using the canonical OrderItem structure.",
            "constraint": {
                 "collection": "order_items",
                 "constraintType": "foreign",
                 "localKey": "_id",
                 "foreignKey": "order_ref_id",
                 "direction": "child",
                 "targetPath": "order_items",
                 "projection": [
                      "product_ref_id",
                      "product_name_snapshot",
                      "quantity",
                      "price_at_purchase",
                      "original_product_id"
                 ]
            },
            "consistency": "strong"
       },
       "ShippingAddress": {
            "relationshipType": "one-to-one",
            "description": "Order has a shipping address, embedded as a snapshot using the canonical Address structure.",
            "constraint": {
                 "constraintType": "embedded",
                 "direction": "child",
                 "targetPath": "shipping_address",
                 "projection": [
                      "street_address",
                      "city",
                      "state",
                      "postal_code",
                      "country"
                 ]
            },
            "consistency": "strong"
       },
       "BillingAddress": {  
            "relationshipType": "one-to-one",
            "description": "Order has a billing address, embedded as a snapshot using the canonical Address structure.",
            "constraint": {
                 "constraintType": "embedded",
                 "direction": "child",
                 "targetPath": "billing_address",
                 "projection": [
                      "street_address",
                      "city",
                      "state",
                      "postal_code",
                      "country"
                 ]
            },
            "consistency": "strong"
       }
   }
}
